// ========================================
// بيانات العملاء - من ملف JSON
// ========================================

const customersData = [
    {
        "الرقم القومي": "28811220103831",
        "الاسم": "اسلام علي محمد",
        "رقم العمارة": 4,
        "رقم الشقة": 1,
        "إجمالي ثمن الوحدة": 1594440,
        "القسط الأول": 218888,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 159444,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 318888,
        "موعد بداية القسط الثالث": "2025-06-16",
        "اخر موعد القسط الثالث": "2025-09-15",
        "المتبقي من ثمن الوحدة": 797220
    },
    {
        "الرقم القومي": "28510010125018",
        "الاسم": "احمد فتحى",
        "رقم العمارة": 4,
        "رقم الشقة": 2,
        "إجمالي ثمن الوحدة": 2243340,
        "القسط الأول": 348668,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 224334,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 448668,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1121670
    },
    {
        "الرقم القومي": "26405028800191",
        "الاسم": "ناصر منير خالد",
        "رقم العمارة": 4,
        "رقم الشقة": 3,
        "إجمالي ثمن الوحدة": 2132100,
        "القسط الأول": 326420,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 213210,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 426420,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1066050
    },
    {
        "الرقم القومي": "29109011322311",
        "الاسم": "عمرو حسين مغاوري",
        "رقم العمارة": 4,
        "رقم الشقة": 4,
        "إجمالي ثمن الوحدة": 2173500,
        "القسط الأول": 334700,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 217350,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 434700,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1086750
    },
    {
        "الرقم القومي": "28011141401537",
        "الاسم": "احمد زكي عبد الرحمن",
        "رقم العمارة": 4,
        "رقم الشقة": 11,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "27901090104585",
        "الاسم": "سماح كامل احمد",
        "رقم العمارة": 4,
        "رقم الشقة": 12,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "28303128800199",
        "الاسم": "احمد سمير فتحي",
        "رقم العمارة": 4,
        "رقم الشقة": 13,
        "إجمالي ثمن الوحدة": 2317500,
        "القسط الأول": 363500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 231750,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 463500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1158750
    },
    {
        "الرقم القومي": "26812201600637",
        "الاسم": "مروة مجدى سيد",
        "رقم العمارة": 4,
        "رقم الشقة": 21,
        "إجمالي ثمن الوحدة": 2362500,
        "القسط الأول": 372500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 236250,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 472500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1181250
    },
    {
        "الرقم القومي": "27803250101225",
        "الاسم": "عز عبد الغفار عبد اللطيف",
        "رقم العمارة": 4,
        "رقم الشقة": 14,
        "إجمالي ثمن الوحدة": 2494800,
        "القسط الأول": 398960,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 249480,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 498960,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1247400
    },
    {
        "الرقم القومي": "29502152600776",
        "الاسم": "محمد ناصر مرزوق",
        "رقم العمارة": 4,
        "رقم الشقة": 22,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "29807212600211",
        "الاسم": "عبد الرحيم احمد",
        "رقم العمارة": 4,
        "رقم الشقة": 23,
        "إجمالي ثمن الوحدة": 2362500,
        "القسط الأول": 372500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 236250,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 472500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1181250
    },
    {
        "الرقم القومي": "27404300102218",
        "الاسم": "عماد صفوت يوسف",
        "رقم العمارة": 4,
        "رقم الشقة": 24,
        "إجمالي ثمن الوحدة": 2362500,
        "القسط الأول": 372500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 236250,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 472500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1181250
    },
    {
        "الرقم القومي": "28011192402058",
        "الاسم": "محمد نبيل محمد",
        "رقم العمارة": 4,
        "رقم الشقة": 31,
        "إجمالي ثمن الوحدة": 2494800,
        "القسط الأول": 398960,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 249480,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 498960,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1247400
    },
    {
        "الرقم القومي": "28307012500819",
        "الاسم": "وسيم عبد المسيح",
        "رقم العمارة": 4,
        "رقم الشقة": 32,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "29210281800586",
        "الاسم": "راضية سعيد يوسف",
        "رقم العمارة": 4,
        "رقم الشقة": 33,
        "إجمالي ثمن الوحدة": 2362500,
        "القسط الأول": 372500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 236250,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 472500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1181250
    },
    {
        "الرقم القومي": "27901150105055",
        "الاسم": "حسن محمد حسن",
        "رقم العمارة": 4,
        "رقم الشقة": 34,
        "إجمالي ثمن الوحدة": 2362500,
        "القسط الأول": 372500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 236250,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 472500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1181250
    },
    {
        "الرقم القومي": "28409101405053",
        "الاسم": "محمد عبد النبي محمد",
        "رقم العمارة": 4,
        "رقم الشقة": 41,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "28103080104528",
        "الاسم": "ايمان سمير حسن",
        "رقم العمارة": 4,
        "رقم الشقة": 42,
        "إجمالي ثمن الوحدة": 2447280,
        "القسط الأول": 389456,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 244728,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 489456,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1223640
    },
    {
        "الرقم القومي": "26810121401525",
        "الاسم": "لبني حسن محمد مصطفي",
        "رقم العمارة": 4,
        "رقم الشقة": 43,
        "إجمالي ثمن الوحدة": 2317500,
        "القسط الأول": 363500,
        "موعد بداية القسط الأول": "2025-02-16",
        "اخر موعد القسط الأول": "2025-03-15",
        "القسط الثانى": 231750,
        "موعد بداية القسط الثانى": "2025-03-16",
        "اخر موعد القسط الثانى": "2025-06-15",
        "القسط الثالث": 463500,
        "موعد بداية القسط الثالث": "2025-03-16",
        "اخر موعد القسط الثالث": "2025-06-15",
        "المتبقي من ثمن الوحدة": 1158750
    }
];

// دالة للبحث عن عميل بالرقم القومي
function findCustomer(nationalId) {
    return customersData.find(customer => customer["الرقم القومي"] === nationalId);
}

// دالة لحساب حالة القسط (مدفوع / معلق / متأخر)
function getInstallmentStatus(dueDate) {
    const today = new Date();
    const due = new Date(dueDate);
    
    if (due < today) {
        return 'paid'; // افتراضياً نعتبره مدفوع لو تاريخه فات
    } else if (due <= new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000)) {
        return 'due'; // مستحق خلال أسبوع
    } else {
        return 'pending'; // معلق
    }
}

// دالة لتنسيق الأرقام بفواصل
function formatNumber(number) {
    return number.toLocaleString('ar-EG');
}

// دالة لتنسيق التاريخ
function formatDate(dateString) {
    const date = new Date(dateString);
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('ar-EG', options);
}
